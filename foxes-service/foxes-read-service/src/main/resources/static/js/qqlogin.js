var QC=function(){var t=function(){};var e=window.ActiveXObject&&~~navigator.userAgent.match(/MSIE\s+(\d+)/)[1];var n=function(){var e=function(t){var e=[],n=arguments.callee._temp=arguments.callee._temp||document.createElement("div");n.innerHTML=t;while(n.firstChild){e.push(n.removeChild(n.firstChild))}return e.length>1?function(){var t=document.createDocumentFragment();for(var n=0;n<e.length;n++){t.appendChild(e[n])}return t}():e[0]};var n=function(t,e){return t.replace(arguments.callee._reg,function(t,n){return e[n]!==null?e[n]:n})};n._reg=/\{(\w+)\}/g;return{str2dom:e,format:n,extend:function(e,n){var o=t;o.prototype=n.prototype;e.prototype=new o;e.constructor=e;return e}}}();var o=function(){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function n(n){t.lastIndex=0;return t.test(n)?'"'+n.replace(t,function(t){var n=e[t];return typeof n==="string"?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function o(t){var e=[],r="";for(var i in t){r=t[i];r=r!==undefined?r:"";switch(typeof r){case"string":r=n(r);break;case"object":r=o(r);break;case"function":continue}e.push('"'+i+'":'+r)}return"{"+e+"}"}return{stringify:function(){return window.JSON&&JSON.stringify?JSON.stringify:o}(),parse:function(t){t=t||"{}";var e={};try{e=new Function("return ("+t+")")()}catch(e){u.error("JSON.parse => parse数据格式错误:"+t)}return e}}}();var r=function(){if(document.implementation.hasFeature("XPath","3.0")){XMLDocument.prototype.selectNodes=function(t,e){if(!e){e=this}var n=this.createNSResolver(this.documentElement);var o=this.evaluate(t,e,n,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var r=[];for(var i=0;i<o.snapshotLength;i++){r[i]=o.snapshotItem(i)}return r};Element.prototype.selectNodes=function(t){if(this.ownerDocument.selectNodes){return this.ownerDocument.selectNodes(t,this)}else{throw"For XML Elements Only"}}}var t=function(t){var n=e?new ActiveXObject("Microsoft.XMLDOM"):document.implementation.createDocument("text/xml","",null);if(e){if(n.loadXML(t)){return n}else{return null}}else{try{var o=n.childNodes;for(var r=o.length-1;r>=0;r--)n.removeChild(o[r]);var i=new DOMParser;var a=i.parseFromString(t,"text/xml");var s=n.importNode(a.documentElement,true);n.appendChild(s);return n}catch(t){return null}}};return{stringify:function(t){return t.xml||(new XMLSerializer).serializeToString(t)},parse:t}}();var i=function(){return{extend:function(){var t=arguments,e=arguments.length,n=false,o=1,r=t[0],i,a,s,c;if(typeof r==="boolean"){n=r;r=arguments[1]||{};o=2}if(typeof r!=="object"&&typeof r!=="function"){r={}}if(e===o){r={};--o}for(;o<e;o++){if((i=arguments[o])!=null){for(var u in i){a=r[u];c=i[u];if(r===c){continue}if(n&&c&&typeof c==="object"&&!c.nodeType){if(a){s=a}else if(c instanceof Array){s=[]}else if(typeof c==="object"){s={}}else{s=c}r[u]=object.extend(n,s,c)}else if(c!==undefined){r[u]=c}}}}return r}}}();var a=function(){var t=/"/g;var e={genHttpParamString:function(t){return this.commonDictionaryJoin(t,null,null,null,window.encodeURIComponent)},splitHttpParamString:function(t){return this.commonDictionarySplit(t,null,null,null,window.decodeURIComponent)},commonDictionarySplit:function(t,e,n,o,r){var i={},a,s,c,u,l;if(!t||typeof t!="string"){return i}if(typeof e!="string"){e="&"}if(typeof n!="string"){n=""}if(typeof o!="string"){o="="}a=t.split(e);if(a&&a.length){for(var d=0,p=a.length;d<p;++d){s=a[d].split(o);if(s.length>1){u=s.slice(1).join(o);c=u.split(n);l=c.slice(n.length,c.length-n.length).join(n);i[s[0]]=typeof r=="function"?r(l):l}else{s[0]&&(i[s[0]]=true)}}}return i},commonDictionaryJoin:function(e,n,o,r,i){var a=[],s,c;if(!e||typeof e!="object"){return""}if(typeof e=="string"){return e}if(typeof n!="string"){n="&"}if(typeof o!="string"){o=""}if(typeof r!="string"){r="="}for(var u in e){c=(e[u]+"").replace(t,'\\"');a.push(u+r+o+(typeof i=="function"?i(c):c)+o)}return a.join(n)}};return{stringify:function(t){return e.genHttpParamString(t)},parse:function(t){return e.splitHttpParamString(t)},getParameter:function(t){var e=new RegExp("(\\?|#|&)"+t+"=([^&#]*)(&|#|$)"),n=location.href.match(e);return decodeURIComponent(!n?"":n[2])}}}();var s=function(){var t=[/&(?!amp;|lt;|gt;|#039;|quot;|#39;)/g,/</g,/>/g,/\x27/g,/\x22/g],e=["&amp;","&lt;","&gt;","&#039;","&quot;"];return{escHTML:function(n){var o=n;for(var r=0,i=t.length;r<i;r++){o=o.replace(t[r],e[r])}return o},format:n.format}}();var c=function(){var t=document.domain||"";return{set:function(e,n,o,r,i){if(i){var a=new Date;a.setTime(a.getTime()+36e5*i)}document.cookie=e+"="+n+"; "+(i?"expires="+a.toGMTString()+"; ":"")+(r?"path="+r+"; ":"path=/; ")+(o?"domain="+o+";":"domain="+t+";");return true},get:function(t){var e=new RegExp("(?:^|;+|\\s+)"+t+"=([^;]*)"),n=document.cookie.match(e);return!n?"":n[1]},del:function(e,n,o){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(o?"path="+o+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+t+";")}}}();var u=function(){var t={log:3,info:2,warn:1,error:0};var e=t.info;var n=" :: [QQConnect] > ";var o=function(e){return function(o){window.console&&console[e]&&r()>=t[e]&&console[e](n+o)}};var r=function(){return~~(e||t.info)};return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),setLevel:function(n){return e=t[n]||e}}}();var l=function(){var t;function e(){e.fired=true;var t;while(t=e.list.shift()){t()}}e.list=[];e.fired=false;function n(){if(t)return;t=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);e()},false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"||document.readyState==="loaded"){document.detachEvent("onreadystatechange",arguments.callee);e()}});if(document.documentElement.doScroll){(function(){try{document.documentElement.doScroll("left");document.body.appendChild}catch(t){if(!e.fired){setTimeout(arguments.callee,0)}return}e()})()}}}n();return{domReady:function(t){if(typeof t=="function"){if(e.fired||document.readyState==="complete"||document.readyState==="loaded"){e();t()}else{e.list.push(t)}}},add:function(t,e,n){if(t&&e&&n){t&&t.addEventListener?t.addEventListener(e,n,false):t.attachEvent("on"+e,n)}},remove:function(t,e,n){if(t&&e&&n){t&&t.removeEventListener?t.removeEventListener(e,n,false):t.detachEvent("on"+e,n)}}}}();var d=function(){return{_insertButton:t}};var p=function(){return{}};var f=function(t,e,n){setTimeout(function(){f.send(t,e,n)},0)};f.send=function(t,e,n){var o="https://pingfore.qq.com/pingd";var r="?cc=-&ct=-&java=1&lang=-&pf=-&scl=-&scr=-&tt=-&tz=-8&vs=3.3&flash=&";var i=/(?:^|;+|\s+)pgv_pvid=([^;]*)/i;var a,s,c,u,l,d,p,f,h;n=n||{};s=t||location.hostname||"-";c=e||"/open/connect/error_path";u=n.referDomain||location.hostname;l=n.referPath||location.pathname;p=Math.random();f=document.cookie.match(i);if(f&&f.length&&f.length>1){d=f[1]}else{d=Math.round(Math.random()*2147483647)*(new Date).getUTCMilliseconds()%1e10;document.cookie="pgv_pvid="+d+"; path=/; domain="+location.hostname+"; expires=Sun, 18 Jan 2038 00:00:00 GMT;"}h=new Image;h.onload=h.onerror=function(){h.onload=h.onerror=null;h=null};h.src=o+r+"dm="+s+"&url="+c+"&rdm="+u+"&rurl="+escape(l)+"&pgv_pvid="+d+"&sds="+p};var h=function(t,e,n,o){setTimeout(function(){h.send(t,e,n,o)},0)};h.send=function(t,e,n,o){var r="https://isdspeed.qq.com/cgi-bin/v.cgi",i,a;o=o||{};i=["flag1="+t,"flag2="+e,"flag3="+n,"1="+(o.reportRate||1),"2="+(o.duration||1e3),"sds="+Math.random()];a=new Image;a.onload=a.onerror=function(){a.onload=a.onerror=null;a=null};a.src=r+"?"+i.join("&")};var m=function(t,e){var n=+new Date;var o=document.createElement("img");e=e||0;o.src="https://cgi.connect.qq.com/report/report?strValue="+e+"&nValue="+t+"&tag=0&t="+n};return{Like:d(),Share:p(),Toolkit:n,JSON:o,XML:r,Object:i,QueryString:a,String:s,Cookie:c,Console:u,Event:l,pv:f,valueStat:h,reportBNL:m,getVersion:function(){return"1.0.1"}}}();(function(t){var e=QC.getVersion();var n=function(t){return typeof t=="string"?document.getElementById(t):t};var o="qzonestyle.gtimg.cn",r="qzs.qq.com";var i;var a=function(t){return i&&(i.dataset&&i.dataset[t]||i.getAttribute("data-"+t))};var s;!function(){s=~~t.QueryString.getParameter("__qc_wId")||~~t.Cookie.get("__qc_wId");if(!s){var e=+new Date%1e3;document.cookie=["__qc_wId="+e,"; path=/"].join(";")}}();var c=/\/qqlogin\.js(?:[?#]appId=(\d+))?/i;var u=document.getElementsByTagName("script");for(var l=0,d,p=u.length;l<p;l++){d=u[l];var f=d.src||"";var h=f.match(c);if(h){i=d;break}}var m=t.Toolkit,g=t.JSON,v=t.XML,_=t.Object,y=t.QueryString,w=t.String,C=t.Cookie,q=t.Console;var k=function(){};var x=window.ActiveXObject&&~~navigator.userAgent.match(/MSIE\s+(\d+)/)[1];var b={PMCrossPage:"https://graph.qq.com/jsdkproxy/PMProxy.html#"+e,FLACrossPage:"https://graph.qq.com/jsdkproxy/FLAProxy.swf",getCrossSolution:function(){var e;if(window.postMessage){e="PMProxy"}else if(!!(window.ActiveXObject&&!!function(){var t=true;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){t=false}return t}()||navigator.plugins&&navigator.plugins["Shockwave Flash"]||false)){e="FLAProxy"}else{t.Console.error("未找到可用的跨域通信方案");e="EMPProxy"}t.Console.info("确定跨域代理策略："+e);return e}};var I=1e3;t.getConfig=function(){return b};var L=function(t,e,n,o){this.uri=t;this.paras=e||{};this.fmt=n||"json";this.method=(o||"get").toLocaleLowerCase();this.successPool=[];this.errorPool=[];this.completePool=[];this.seq=I++};L.prototype.success=function(t){this.successPool.push(t);return this};L.prototype.error=function(t){this.errorPool.push(t);return this};L.prototype.complete=function(t){this.completePool.push(t);return this};L.prototype.send=k;L.prototype._onCallback=function(t,e,n){if(t.status==200||t.status==204){var o=t.responseText,r=new S(o,t.status,e,n);!~~r.code?this.onSuccess(r):this.onError(r)}else{this.onError(new S("",t.status,e,n))}};L.prototype.onSuccess=function(t){var e=this.successPool;for(var n=0;n<e.length;n++){e[n](t)}this.onComplete(t)};L.prototype.onError=function(t){var e=this.errorPool;for(var n=0;n<e.length;n++){e[n](t)}this.onComplete(t)};L.prototype.onComplete=function(t){var e=this.completePool;for(var n=0;n<e.length;n++){e[n](t)}};var S=function(t,e,n,o){this.status=e||-1;this.fmt=n||"json";this.code=this.ret=-1;this.data=null;this.seq=o||-1;this.parseData(t);if(this.code&&S[this.code]){S[this.code](this.data,this.dataText)}};S.prototype.parseData=function(e){this.dataText=e;switch(this.fmt){case"xml":this.data=t.XML.parse(e||"<root></root>");var n=this.data.selectNodes("//ret")[0];this.code=this.ret=n&&n.firstChild.nodeValue||-1;break;case"json":default:this.data=t.JSON.parse(e||"{}");this.code=this.ret=this.data.ret!==undefined?~~this.data.ret:this.data.data&&this.data.data.ret!==undefined?~~this.data.data.ret:-1;break}};S.prototype.stringifyData=function(){return this.dataText};S[100013]=function(e,n){t.Login.signOut();t.Console.warn("api返回token失效")};var E=t.Toolkit.extend(function(){L.apply(this,arguments);this.xhr=E.createInstance()},L);t.Object.extend(E.prototype,{send:function(){var e=this.xhr,n=this.method,o=this.fmt,r=this,i=t.QueryString.stringify(r.paras),a=n=="post"?this.uri:this.uri.indexOf("?")<0?this.uri+"?"+i:this.uri.replace(/[&?]*/g,"")+"&"+i;e.open(n,a,!!this.async);try{e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.setRequestHeader("X-Requested-From","_TC_QC_jsProxy_")}catch(t){}e.onreadystatechange=function(){if(e.readyState===4){r._onCallback(e,o,r.seq)}};e.send(i||null)}});E.createInstance=window.XMLHttpRequest?function(){return new window.XMLHttpRequest}:function(){return new window.ActiveXObject("Microsoft.XMLHTTP")};var Q=function(){this.requests=[];this.invokes=[];this.readyPool=[];this.isReady=false;this.timeStamp=+new Date;this.init()};Q.prototype.init=k;Q.prototype.ready=function(t){this.readyPool.push(t)};Q.prototype.onReady=function(){this.isReady=true;var t=this.readyPool;for(var e=0;e<t.length;e++){t[e]()}};Q.prototype.send=function(t){var e;t&&this.requests.push(t);while(this.isReady&&(e=this.requests.shift())){Q.pendingRequests.push(e);QC.Console.log("seq no :"+e.seq+"请求发起"+"  ts -> "+ +new Date);this._doSend(e)}};Q.prototype._doSend=function(t){};Q.prototype._preDispatch=function(t,e,n,o){var r=e.data||e.currentTarget&&e.currentTarget.data||{};var i=r.split("@@@");switch(i[0]){case"invoke":this.invoke(i[1]);break;default:this.dispatch(i[1]||e,n,o);break}};Q.prototype.invoke=function(t){var e;t&&this.invokes.push(t);while(this.isReady&&(e=this.invokes.shift())){this._doInvoke(e)}};Q.prototype._doInvoke=function(t){};Q.prototype.dispose=function(){M=null;this.onDispose()};Q.prototype.onDispose=function(){};Q.pendingRequests=[];Q.dispatchReceive=function(t,e,n,o){var r=Q.pendingRequests;for(var i=0;i<r.length;i++){if(r[i].seq==t){QC.Console.log("seq no :"+t+"响应收到"+"  ts -> "+ +new Date);r[i]._onCallback({status:n,responseText:e},o,t);r.splice(i,1);return}}};Q.invoke=function(){var e=[];return function(n){n&&e.push(n);if(!M){t.Console.info("Proxy未初始化，invoke入栈");Q.generateProxy();return}var o;while(o=e.shift()){M._doInvoke(o)}}}();var M;Q.generateProxy=function(t){var e={PMProxy:R,FLAProxy:T,EMPProxy:D};if(t){return new e[t]}if(!M){M=new(e[b.getCrossSolution()])}return M};Q.getFunction=function(t){var e;t=t.split(".");for(var n=0;n<t.length;n++){e=e?e[t[n]]:window[t[n]]}return e};t._create_fla_proxy=function(){t._create_fla_proxy=k;if(!(document["_qc_cross_request_flash_proxy"]||n("_qc_cross_request_flash_proxy"))){new T}};var T=t.Toolkit.extend(function(){Q.apply(this,arguments)},Q);t.Object.extend(T.prototype,{prefix:"_TC_QC_flaProxy_",init:function(){var e=this,n=function(){var e=window.name.match(/oauth2Login_(\d+)/),n=~~t.Cookie.get("__qc_wId"),o;if(e&&e[1]){o=e[1]}else if(window._b_is_qc_cb_win){o=1e4+n}else{o=n;document.cookie=["__qc_wId="+o,"; path=/"].join(";")}t.Console.info("跨域窗口标识号 __qc_wId : "+o);return o}(),o=n<1e4?n+1e4:n-1e4;var r=T.getFlashHtml({src:b.FLACrossPage,width:"100%",height:"100%",allowScriptAccess:"always",id:"_qc_cross_request_flash_proxy",name:"_qc_cross_request_flash_proxy",flashVars:"suffix="+this.timeStamp+"&conId="+n+"&conId_receive="+o});var i=this.cot=document.createElement("div");i.style.cssText="position:fixed; _position:absolute; top:-999px; left: -999px; width:1px; height:1px; margin:0; padding:0; display:none;";i.innerHTML=r;QC.Event.domReady(function(){document.body.appendChild(i);i.style.display="block"});window[this.prefix+"onFlashReady_"+this.timeStamp]=function(){t.Console.info("FLAProxy代理创建成功，耗时"+(new Date-e.timeStamp));setTimeout(function(){e.isReady=true;e.send();e.invoke()});if(!t.Login._check()){document["_qc_cross_request_flash_proxy"].initConn()}};window[this.prefix+"onFlashRequestComplete_"+this.timeStamp]=function(t,n,o){setTimeout(function(){e._preDispatch(e,t,n,o)})};window[this.prefix+"onFlashInvokeBack_"+this.timeStamp]=function(){var t=arguments;setTimeout(function(){var e=Q.getFunction(t[0]);var n=t[1];t[0].indexOf(".")>-1?e.apply(null,n):e(n)})}},_doSend:function(e){var o=e.uri,r=t.QueryString.stringify(e.paras),i=e.seq,a=e.fmt,s=e.method;var c=document["_qc_cross_request_flash_proxy"].httpRequest||n("_qc_cross_request_flash_proxy").httpRequest;c?c(o,r,s,a,i):!function(){throw new Error("flash proxy 初始化失败")}()},dispatch:function(t,e,n){var o=t.currentTarget.data,r=t.type!="complete"?404:200;Q.dispatchReceive(e,o,r,n)},_doInvoke:function(t){var e=document["_qc_cross_request_flash_proxy"].jsCallSwf||n("_qc_cross_request_flash_proxy").jsCallSwf;e&&e.apply(null,t)}});T.getFlashHtml=function(t,e,n){var o=[],r=[],i=!!window.ActiveXObject;e=e||9;for(var a in t){switch(a){case"noSrc":case"movie":continue;break;case"id":case"name":case"width":case"height":case"style":if(typeof t[a]!="undefined"){o.push(" ",a,'="',t[a],'"')}break;case"src":if(i){r.push('<param name="movie" value="',t.noSrc?"":t[a],'"/>')}else{o.push(' data="',t.noSrc?"":t[a],'"')}break;default:r.push('<param name="',a,'" value="',t[a],'" />')}}if(i){o.push(' classid="clsid:',n||"D27CDB6E-AE6D-11cf-96B8-444553540000",'"')}else{o.push(' type="application/x-shockwave-flash"')}if(location&&location.protocol.indexOf("https")<0){o.push(' codeBase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab#version=',e,'"')}return"<object"+o.join("")+">"+r.join("")+"</object>"};var P="https://graph.qq.com",j="https://qzonestyle.gtimg.cn";var R=t.Toolkit.extend(function(){Q.apply(this,arguments)},Q);t.Object.extend(R.prototype,{init:function(){var e=this;e._connFrame=document.createElement("iframe");e._connFrame.style.cssText="width:0px; height:0px; display:none; overflow:hidden;";var n=function(){n.fire();n.fire=k};n.fire=function(){t.Console.info("PMProxy代理创建成功，耗时"+(new Date-e.timeStamp));e.isReady=true;e.send();e.invoke()};e._connFrame.onload=n;e._connFrame.addEventListener&&e._connFrame.addEventListener("load",n,false);e._connFrame.attachEvent&&e._connFrame.attachEvent("onload",n);e._connFrame.src=b.PMCrossPage;QC.Event.domReady(function(){document.body.appendChild(e._connFrame)});var o=function(t){if(t.origin&&(t.origin==P||t.origin==j)){e._preDispatch(e,t)}};window.addEventListener?window.addEventListener("message",o,false):window.attachEvent("onmessage",o)},_doSend:function(e){var n=t.QueryString.stringify({uri:e.uri,paras:t.QueryString.stringify(e.paras),fmt:e.fmt,method:e.method});this._connFrame.contentWindow.postMessage(n,P)},dispatch:function(e){var n=e.data,o=n.split(":<.<<#:"),r=o[0],i=o[1],a=o[2],s=o[3];t.Console.log("data:\t"+s);Q.dispatchReceive(r,s,i,a)},_doInvoke:function(e){t.Console.log("invoke:\t"+e);if(typeof e!="string"){return}var n=e.split("#"),o=n[0],r=n[1]&&n[1].split(","),i;i=Q.getFunction(o);i.apply(null,r)},onDispose:function(){this._connFrame.parentNode.removeChild(this._connFrame);this._connFrame=null}});var D=t.Toolkit.extend(function(){Q.apply(this,arguments)},Q);t.Object.extend(D.prototype,{init:function(){t.Console.info("init:"+arguments)},_doSend:function(e){t.Console.info("_doSend:"+arguments)},dispatch:function(e){t.Console.info("dispatch:"+arguments)}});t.XHRRequest=E;t.request=function(t,e,n,o){return new E(t,e,n,o)};var F=[];t.api=function(){var e=[];var n=function(e){var n=t.Login._getTokenKeys();if(A<=0)throw new Error("意外的调用了绑定token到req的方法 bindTokenPara");e.paras.oauth_consumer_key=A;e.paras.access_token=n.accessToken;e.paras.openid=n.openid;e.paras.format=e.fmt;return e};var o=function(o,r,i,a){M=Q.generateProxy();var s=N(o);o=s.api||o;r=r||{};a=a||s.method;var c=new L(o,r,i,a);if(A>0){setTimeout(function(){var r=t.Login._getTokenKeys();if(r.openid&&r.accessToken){M.send(n(c))}else{e.push(c);t.Console.warn("openid与accessToken丢失，调用请求入栈 : ["+o+"]，栈大小："+e.length)}},10)}else{e.push(c);t.Console.warn((M.isReady&&A<0?"token获取失败，请调用用户登录流程":"api代理尚未初始化成功")+"，调用请求入栈 : ["+o+"]，栈大小："+e.length)}c.success(function(){QC.valueStat(s.statId,1,0)}).error(function(t){var e=t||{};QC.valueStat(s.statId,1,"number"==typeof e.ret?e.ret:1)});return c};o._ready=function(){t.Console.info("init成功，开始触发api调用堆栈");var o;while(o=e.shift()){M.send(n(o))}};o.getDoc=function(){var t=null,e=function(e,n){var o=document.createElement("script");o.type="text/javascript";o.src="https://qzonestyle.gtimg.cn/qzone/openapi/qc_jsdkdoc.js";document.body.appendChild(o);window.on_qc_jsdkdoc_loaded=function(r){t=r;n&&n(t[e]);document.body.removeChild(o);o=null}};return function(n,o){t&&o?o(t[n]):e(n,o||k)}}();return o}();var O=function(){var e,i,a;var s={A_XL:{styleId:5,size:"230*48"},A_L:{styleId:4,size:"170*32"},A_M:{styleId:3,size:"120*24"},A_S:{styleId:2,size:"105*16"},B_M:{styleId:7,size:"63*24"},B_S:{styleId:6,size:"50*16"},C_S:{styleId:1,size:"16*16"}};function c(e){if(e.clientId){QC.init({appId:e.clientId})}var o=QC.getAppId();if(o<0){QC.getAppId(arguments);return}e.size=e["size"]||"B_M";var r=n(e["btnId"]),i=s[e["size"]]||s["B_M"],a=i["styleId"],c=e["fullWindow"]||false,u=e["btnMode"]||"standard";e.redirectURI=e["redirectURI"]||B;var l=arguments.callee._getPopupUrl(e);var d={size:a,fullWindow:c,url:l};if(e&&e["btnId"]){if(r){r.innerHTML=arguments.callee.getBtnHtml(d,u,e);var p=r.firstChild.onclick;r.firstChild.onclick=function(e){var n,o=function(){n&&n.close();QC.Cookie.del("__qc_wId")};window.addEventListener?window.addEventListener("unload",o,false):window.attachEvent("onunload",o);return function(){if(n){n.close()}n=e();if(!n||true){t._create_fla_proxy()}QC.pv("graph.qq.com","/open/connect/click");return false}}(p)}else{throw new Error("未找到插入节点:")}}}c.TEMPLATE=['<a href="javascript:;" onclick="{onclick};"><img src="{src}" alt="{alt}" border="0"/></a>'].join("");c.getBtnHtml=function(t,e,n){return arguments.callee.MODE[e]&&arguments.callee.MODE[e](t,n)};c.getBtnHtml.MODE={standard:function(t){var e=~~C.get("__qc_wId")+1e4;var n=m.format(c.TEMPLATE,{src:"https://"+o+"/qzone/vas/opensns/res/img/Connect_logo_"+t.size+".png",onclick:t.fullWindow?"return window.open('"+t.url+"', 'oauth2Login_"+e+"');":"return window.open('"+t.url+"', 'oauth2Login_"+e+"' ,'height=525,width=585, toolbar=no, menubar=no, scrollbars=no, status=no, location=yes, resizable=yes')",alt:"QQ登录"});return n},showUserAfterLogin:function(t,e){var n=g.stringify(e),o=s[e["size"]]||s["B_M"],i=o["size"].split("*"),a='<iframe frameBorder="0" scrolling="no" src="https://'+r+"/qzone/openapi/frames/login_button.html#para="+encodeURIComponent(n)+'" width="'+Math.max(200,i[0])+'" height="'+i[1]+'" allowTransparency="true"></iframe>';return a}};c._getPopupUrl=function(t){var e=t["scope"]||"all",n=t["redirectURI"]||"",o=t["display"]||"",r=t["appId"]||QC.getAppId();n=n||"http%3A%2F%2Fqzonestyle.gtimg.cn%2Fqzone%2Fopenapi%2Fredirect-1.0.1.html"||location.protocol+"//"+location.host+(location.port&&location.port!="80"?":"+location.port:"")+"/qc_callback.html"||"";if(x<=6){n="https://graph.qq.com/jsdkproxy/redirect_ie6.html#"+encodeURIComponent(n)}var i=["client_id="+r,"response_type=token"],a="https://graph.qq.com/oauth2.0/authorize";if(e){i.push("scope="+e)}if(n){if(n.indexOf("://")>0){n=encodeURIComponent(n)}i.push("redirect_uri="+n)}if(o=="mobile"){i.push("display="+o)}a=a+"?"+i.join("&");return a};var u=function(){return i||function(){var t=location&&location.hash.match(/access_token=([^&]*)/i),e,n=[],o;var r;if(r=C.get("__qc__k")){o=r.split("=");if(r.length&&o.length!=2){throw new Error("QQConnect -> cookie : __qc__k 格式非法")}}i=t&&t[1]||o&&o[1]}()};var l=function(){var t,n=[];u();var o=function(t,e,o){var r;while(r=n.shift()){setTimeout(function(n){return function(){n(t,e,o)}}(r))}};var r=function(t){q.error(t+" : _getMeError");window.callback({error_description:t})};var s,c;var l=function(n){!c&&(c=window.callback);n&&l.cbPool.push(n);window.callback=function(n){clearTimeout(t);if(!n.openid){return}a=n;var o=e=n.openid;var r=i;q.log(" getMe => openId & accessToken "+[o,r,s?"通过me接口":"通过本地"]);var u;while(u=l.cbPool.shift()){u(o,i,n)}s=null;window.callback=c};if(!u()){r("access_token丢失");return}if(a){window.callback(a)}else{if(s)return;s=document.createElement("script");s.type="text/javascript";s.src="https://graph.qq.com/oauth2.0/me?access_token="+i;s.onerror=function(){r("me接口返回格式错误")};var o=document.getElementsByTagName("head")[0];o&&o.appendChild(s);t=setTimeout(function(){r("me接口超时")},5e3)}};l.cbPool=[];return function(t,e){e?n.unshift(t):n.push(t);l(o);QC.valueStat(350371,1,0)}}();var d=function(){a=null;i=undefined;y=null;var t;for(var e=0;e<v.length;e++){t=v[e];t()}QC.valueStat(350370,1,0)};var p=function(t){var e=c._getPopupUrl(t||{});QC.valueStat(350369,1,0);return window.open(e)};var f=function(t,e){QC.Login.fillUserInfo(e["btnId"],t)};var h=[],v=[],y;var w=function(t,e,n,o){var r=arguments;!o&&n!==null&&v.push(function(t){return function(){var e=[r[0],null,null,1];(n||k)(t);r.callee.apply(null,e)}}(t));var a;var s=function(){for(var t=0;t<h.length;t++){a=h[t];a(y)}};!o&&e!==null&&h.push(function(t){return function(n){(e||f)(n,t)}}(t));if(!y){i?l(function(e){if(e){QC.api("get_user_info").success(function(t){y=t.data;s()}).error(function(t){QC.Console.error("Login => getMe 获取数据失败"+t)})}else{c(t)}}):c(t)}else{y&&s()}QC.valueStat(350368,1,0)};_.extend(w,{insertButton:c,getMe:l,showPopup:p,signOut:function(){e="";document.cookie=["__qc__k=","path=/;"].join(";");d()},_getTokenKeys:function(){return{openid:e,accessToken:i}},check:function(){QC.valueStat(350372,1,0);return!!i},_check:function(){return!!(a&&i&&y)},_onLoginBack:function(t,n,o){if(t&&n){e=t;document.cookie=["__qc__k="+["TC_MK",n].join("="),"path=/"].join(";")}a={client_id:a&&a.client_id||-1,openid:e};u();QC.Event.domReady(function(){QC.init();!o&&QC.Login({},null,null,1)})},reset:function(){h=[];v=[]},fillUserInfo:function(t,e){var o=n(t),r=['<span class="qc_item figure"><img src="{figureurl}" class="{size_key}"/></span>','<span class="qc_item nickname" style="margin-left:6px;">{nickname}</span>','<span class="qc_item logout"><a href="javascript:QC.Login.signOut();" style="margin-left:6px;">退出</a></span>'].join("");o&&(o.innerHTML=QC.String.format(r,{nickname:QC.String.escHTML(e.nickname),figureurl:e.figureurl}))}});return w};t.Login=O();var A=-1,z=null,B="";t.init=function(e){e=e||z||{};z=e;var n=t.Login._getTokenKeys();A=e.appId;B=e.redirectURI;if(!n.openid){Q.invoke();if(F.length&&e.appId>-1){for(var o=0;o<F.length;o++){F[o]()}}return}t.Login.getMe(function(n,o,r){if(!~~r.error&&(r.client_id<=0||r.client_id%1e6==e.appId%1e6)){A=r.client_id=e.appId||e.clientId||e.app_id||e.client_id||-1;t.api._ready&&t.api._ready()}else{t.Console.error(r.error_description||"appId/client_id 不匹配")}},true)};t.getAppId=function(t){if(t){F.push(function(){t.callee.apply(null,t)})}return A};t.invoke=function(){var t=Q.generateProxy("FLAProxy");t.invoke(arguments)};var N=function(){var t={get_user_info:{api:"https://graph.qq.com/user/get_user_info",method:"get",statId:350373},add_topic:{api:"https://graph.qq.com/shuoshuo/add_topic",method:"post",statId:350374},add_one_blog:{api:"https://graph.qq.com/blog/add_one_blog",method:"post",statId:350375},add_album:{api:"https://graph.qq.com/photo/add_album",method:"post",statId:350376},upload_pic:{api:"https://graph.qq.com/photo/upload_pic",method:"post",statId:350377},list_album:{api:"https://graph.qq.com/photo/list_album",method:"get",statId:350391},add_share:{api:"https://graph.qq.com/share/add_share",method:"post",statId:350378},check_page_fans:{api:"https://graph.qq.com/user/check_page_fans",method:"get",statId:350379},add_t:{api:"https://graph.qq.com/t/add_t",method:"post",statId:350380},add_pic_t:{api:" https://graph.qq.com/t/add_pic_t",method:"post",statId:350381},del_t:{api:"https://graph.qq.com/t/del_t",method:"post",statId:350382},get_repost_list:{api:"https://graph.qq.com/t/get_repost_list",method:"get",statId:350383},get_info:{api:"https://graph.qq.com/user/get_info",method:"get",statId:350384},get_other_info:{api:"https://graph.qq.com/user/get_other_info",method:"get",statId:350385},get_fanslist:{api:"https://graph.qq.com/relation/get_fanslist",method:"get",statId:350386},get_idollist:{api:"https://graph.qq.com/relation/get_idollist",method:"get",statId:350387},add_idol:{api:"https://graph.qq.com/relation/add_idol",method:"post",statId:350388},del_idol:{api:"https://graph.qq.com/relation/del_idol",method:"post",statId:350389},get_tenpay_addr:{api:"https://graph.qq.com/cft_info/get_tenpay_addr",method:"get",statId:350390}};return function(e){return t[e]||{}}}();(function(){var e=a("appid");var n=a("redirecturi");if(e){t.Console.info("检测到自动初始化参数\nappId:"+e+"\nrUri:"+n);if(isNaN(e)){t.Console.error("参数appid错误")}else if(n&&n.indexOf("http")!=0){t.Console.error("参数rediectURI错误")}else{t.Event.domReady(function(){t.init({appId:e,redirectURI:n})})}}var o=a("callback");if(o){window._b_is_qc_cb_win=true;QC.Login.getMe(function(t,e,n){if(window.opener){QC.Console.info("cb_method_1:window.opener.QC.Login._onLoginBack");try{window.opener.QC.Login._onLoginBack(t,e)}catch(n){QC.Console.info("cb_method_2:window.opener.postMessage");try{window.opener.postMessage("invoke@@@QC.Login._onLoginBack#"+[t,e].join(","),"*")}catch(n){QC.Console.info("cb_method_3:QC.invoke");try{QC.invoke("QC.Login._onLoginBack",t,e)}catch(t){QC.Console.info("cb_method_5:[empty]")}}}}else{QC.Console.info("cb_method_4:QC.invoke");try{QC.invoke("QC.Login._onLoginBack",t,e)}catch(t){}}setTimeout(function(){if(x>7){var t=window.open("about:blank","_self");t.close()}else{window.close()}},1e3)});QC.pv("graph.qq.com","/open/connect/channel/pv")}else if(e&&QC.Login.check()){QC.Event.domReady(function(){QC.Login.getMe(function(t,e){QC.Login._onLoginBack(t,e,1)})});QC.pv("graph.qq.com","/open/connect/logged_in/pv");QC.reportBNL(11236,e)}else{QC.pv("graph.qq.com","/open/connect/pv");QC.reportBNL(11236,e)}})()})(QC);(function(){window.qc=QC;if(typeof Object.freeze=="function"){Object.freeze(QC)}})();