(function(){window.User_Review={data:{tabIndex:0,loading:[false,false,false,false],bookReview:[{},{},{},{}],pageSize:20,ready:[false,false,false,false]},watch:{topdataloading:"initData"},methods:{initData:function(){if(!this.ready[0]&&this.topdataloading[3]){Vue.set(this.ready,0,true);this.getMyBookReview(0)}},setTabIndex:function(e){if(this.tabIndex==e)return;this.tabIndex=e;if(!this.ready[e]){Vue.set(this.ready,e,true);this.getMyBookReview(0)}},setPageIndex:function(e){var t=this.tabIndex;if(this.bookReview[t].pageIndex==e)return;this.bookReview[t].pageIndex=e;if(!this.bookReview[t].pages[e]){this.getMyBookReview(e)}},goPageNum:function(){var e=this.tabIndex;var t=this.bookReview[e].goPageNo;if(isNaN(t)||t<1||t>this.bookReview[e].pageCount||t-1==this.bookReview[e].pageIndex)return;this.bookReview[e].goPageNo=t;this.bookReview[e].pageIndex=t-1;if(!this.bookReview[e].pages[t-1]){this.getMyBookReview(t-1)}},showAllText:function(e){var t=this.bookReview[this.tabIndex].pageIndex;var i=this.bookReview[this.tabIndex].pages[t];i[e].ShowAll=!i[e].ShowAll;Vue.set(this.bookReview[this.tabIndex].pages,t,i)},getMyBookReview:function(e){if(this.loading[this.tabIndex])return;Vue.set(this.loading,this.tabIndex,true);var t=this;ajaxService("/partview/GetMyBookReview",{type:t.tabIndex,index:e,size:t.pageSize},function(i,a){Vue.set(t.loading,t.tabIndex,false);if(a==1){Util.showMsgBox("网络连接异常，请稍后再试",1e3);return}if(a==2){Util.showMsgBox("系统错误，请稍后再试",1e3);return}if(i!=""&&i.List.length>0){for(var o=0;o<i.List.length;o++){i.List[o].ShowAll=false}if(e==0){Vue.set(t.bookReview,t.tabIndex,t.setPage(i.PageCount,i.List))}else{t.bookReview[t.tabIndex].pages[e]=i.List}}})},setPage:function(e,t){var i={pageIndex:0,pageCount:e,pages:new Array(e),goPageNo:1};i.pages[0]=t;return i}}}})();