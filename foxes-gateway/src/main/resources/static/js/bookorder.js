(function(){window.bookOrder={type:-1,hasInit:[false,false,false,false,false],loading:[false,false,false,false,false],setCollectLoading:false,size:10,dom:{content:[]},hasInitBody:false,draftFunction:null,deleteBookOrderFunction:null,setType:function(t){if(this.type==t)return;if(!this.hasInitBody){this.dom.content=[$("#bookrdercontent0"),$("#bookrdercontent1"),$("#bookrdercontent2"),$("#bookrdercontent3"),$("#bookrdercontent4")];this.hasInitBody=true}this.type=t;if(t==0||t==1||t==4)this.dom.content[t].show().siblings().hide();if(!this.hasInit[t]){this.hasInit[t]=true;this.getBokOrderList(t,0)}},initTab:function(t){this.type=t;this.hasInit[t]=true;this.getBokOrderList(t,0)},getBokOrderList:function(t,e){if(this.loading[t])return;this.dom.content[t].html('<p class="nokeep-book">正在加载 . . .</p>');this.loading[t]=true;$.get("/BookOrder/GetBookOrderList",$.param({type:t,index:e,size:this.size}),function(e){bookOrder.loading[t]=false;bookOrder.dom.content[t].html(e)})},goDetail:function(t,e,o){if(e==0){window.open("/bookorderdetail/"+t)}else if(e==1){Util.showMsgBox("屏蔽原因："+o)}else if(typeof this.draftFunction=="function"){this.draftFunction(t)}},setCollect:function(t){if(!window.hasLogin){window.login();return}if(this.setCollectLoading)return;var e=$(".bookordercollect"+t);var o=e.hasClass("keeped")?1:0;this.setCollectLoading=true;ajaxService("/service/CollectBookOrder",{id:t,type:o},function(t,i){bookOrder.setCollectLoading=false;if(i==1){Util.showMsgBox("网络连接异常，请稍后再试");return}if(i==2){Util.showMsgBox("系统错误，请稍后再试");return}var n=o==0?"添加收藏":"取消收藏";if(t.Code==0){Util.showMsgBox(n+"成功",1e3,true);e.toggleClass("keeped");var s=e.find("em");var r=s.html();if(r==""){s.html(1)}else{var l=parseInt(r)+(o==0?1:-1);s.html(l==0?"":l.toString())}}else{Util.showMsgBox(n+"失败，请稍后再试")}})},alertCollect:function(){Util.showMsgBox("不能收藏已被屏蔽的书单")},deleteBookOrder:function(t){this.deleteBookOrderFunction(t)}}})();