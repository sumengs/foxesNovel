(function(){window.User_BookTicket={data:{type:0,loading:[false,false,false],list:[{},{},{}],pageSize:9,ready:[false,false,false]},watch:{topdataloading:"initData"},methods:{initData:function(){if(!this.ready[0]&&this.topdataloading[10]){Vue.set(this.ready,0,true);this.getData(0)}},setType:function(t){if(this.type==t)return;this.type=t;if(!this.ready[t]){Vue.set(this.ready,t,true);this.getData(0)}},setPageIndex:function(t){var e=this.type;if(this.list[e].pageIndex==t)return;this.list[e].pageIndex=t;if(!this.list[e].pages[t]){this.getData(t)}},getData:function(t){if(this.loading[this.type])return;Vue.set(this.loading,this.type,true);var e=this;ajaxService("/partview/GetMyBookTicket",{type:e.type,index:t,size:e.pageSize},function(i,a){Vue.set(e.loading,e.type,false);if(a==1){Util.showMsgBox("网络连接异常，请稍后再试");return}if(a==2){Util.showMsgBox("系统错误，请稍后再试");return}if(i!=""&&i.List.length>0){if(t==0){Vue.set(e.list,e.type,e.setPage(i.PageCount,i.List))}else{var s=e.list[e.type];s.pages[t]=i.List;Vue.set(e.list,e.type,s)}}})},setPage:function(t,e){var i={pageIndex:0,pageCount:t,pages:new Array(t),goPageNo:1};i.pages[0]=e;return i}}}})();